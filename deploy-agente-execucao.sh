#!/bin/bash

echo "======================================"
echo "Deploy Agente Executor - CORRE√á√ïES FINAIS"
echo "======================================"
echo ""
echo "Este script faz o deploy da edge function agente-execucao com as corre√ß√µes:"
echo "1. ‚úÖ Suporte para mudan√ßa de progresso (ex: 'mude para 50%')"
echo "2. ‚úÖ Detec√ß√£o melhorada de a√ß√µes mencionadas (m√∫ltiplas palavras-chave)"
echo "3. ‚úÖ System prompt atualizado (n√£o pede confirma√ß√µes desnecess√°rias)"
echo "4. ‚úÖ Normaliza√ß√£o de texto (remove acentos)"
echo "5. ‚úÖ Keywords expandidas para melhor detec√ß√£o"
echo "6. ‚úÖ Suporte para bloquear/desbloquear a√ß√µes"
echo "7. ‚úÖ Suporte para adicionar observa√ß√µes"
echo "8. ‚úÖ Extra√ß√£o correta do user_id do token JWT"
echo ""
echo "Executando deploy..."
echo ""

npx supabase functions deploy agente-execucao

echo ""
echo "======================================"
echo "Deploy conclu√≠do!"
echo "======================================"
echo ""
echo "TESTE AGORA:"
echo ""
echo "1. Drag and Drop:"
echo "   - Arraste cards entre colunas no Kanban"
echo "   - Verifique que ficam fixos (sem precisar refresh)"
echo ""
echo "2. Agente Executor - Mudan√ßa de Progresso:"
echo "   Digite: 'mude o progresso para 50% da a√ß√£o implementar sistema de gest√£o financeira'"
echo "   Esperado: üìä Progresso atualizado para 50%"
echo ""
echo "3. Agente Executor - Iniciar A√ß√£o:"
echo "   Digite: 'coloque a primeira a√ß√£o em andamento'"
echo "   Esperado: ‚ñ∂Ô∏è A√ß√£o iniciada (em andamento)"
echo ""
echo "4. Agente Executor - Confirmar:"
echo "   Digite: 'posso atualizar a segunda a√ß√£o?'"
echo "   Agente sugere algo"
echo "   Digite: 'confirmo' ou 'isso, confirmado'"
echo "   Esperado: Agente executa sem pedir confirma√ß√£o novamente"
echo ""
echo "Leia CORRECOES_FINAIS_KANBAN_AGENTE.md para mais detalhes!"
echo ""
